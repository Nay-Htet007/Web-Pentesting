 <!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
<meta name="keywords" content="Security Idiots, Hacking Research Papers, Security Research Papers, Web application Penetration Testing, Web Pentesting, web Injection, SQL Injection, XSS, RFI, LFI, LDAP, XPATH, Bypass, RCE, XML Injection" />
<meta name="description" content="In this post we will cover some other requirements a attacker need to understand about Javascript for advanced XSS exploitation.">
<title>Basics of Javascript for XSS part 2</title>
<link rel="stylesheet" href="../../css/skel.css" />
<link rel="stylesheet" href="../../css/style.css" />
<!--[if lte IE 8]><script src="css/ie/html5shiv.js"></script><![endif]-->
<script src="../../js/jquery.min.js"></script>
<script src="../../js/jquery.dropotron.min.js"></script>
<script src="../../js/skel.min.js"></script>
<script src="../../js/skel-layers.min.js"></script>
<script src="../../js/init.js"></script>
<script src="../../js/jquery.treeview.js" type="text/javascript"></script>
<script src="../../js/jquery.cookie.js" type="text/javascript"></script>
<script src="../../js/demo.js" type="text/javascript"></script>
<!--[if lte IE 8]><link rel="stylesheet" href="css/ie/v8.css" /><![endif]-->
<div id="fb-root"></div>
<script>(function(d, s, id) {
		  var js, fjs = d.getElementsByTagName(s)[0];
		  if (d.getElementById(id)) return;
		  js = d.createElement(s); js.id = id;
		  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&appId=727224234003200&version=v2.0";
		  fjs.parentNode.insertBefore(js, fjs);
		}(document, 'script', 'facebook-jssdk'));

</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54093058-1', 'auto');
  ga('send', 'pageview');

</script>
<script id="dsq-count-scr" src="https://securityidiots-com.disqus.com/count.js" async></script>
</head>
<body class="left-sidebar"> 
<div id="header">
<div class="container">

<h1><a href="basics-of-javascript-for-XSS-part2.html#" id="logo">Security Idiots</a></h1>

<nav id="nav">
 <ul>
<li><a href="../../index.html">Home</a></li>
<li>
<a href="basics-of-javascript-for-XSS-part2.html">Categories</a>
<ul>
<li><a href="../Information-Gathering/index.html">Information Gathering</a>
<ul>
<li><a href="../Information-Gathering/Cloudflare-Bypass/index.html">Cloudflare Bypass</a></li>
</ul>
</li>
<li><a href="../SQL-Injection/index.html">SQL Injection</a>
<ul>
<li><a href="../SQL-Injection/MSSQL/index.html">MSSQL</a></li>
</ul>
</li>
<li><a href="../Tricks/index.html">Tricks</a></li>
<li><a href="index.html">XSS</a></li>
<li><a href="../LFI/index.html">LFI</a></li>
<li><a href="../XPATH-Injection/index.html">XPATH Injection</a></li>
</ul>
</li>
<li><a href="https://www.youtube.com/watch?v=nMOyvIWn5Y8&list=PL5e1zp5ChO-S4nlMUy60AMIkB0XDgd8wb" target="_BLANK">Video Gallery</a></li>
<li><a href="../../construction.html">The Idiots Team</a></li>
<li><a href="../../construction.html">Contact Us</a></li>
</ul>
</nav>
</div>
</div>

<div id="main" class="wrapper style1">
<div class="container">
<div class="row"> 
<div id="sidebar" class="4u sidebar" style="width:25%;background:white;padding:20px;color:black; border: 2px solid #a1a1a1;border-radius: 25px;">
<section>
<header class="major">
<h2>Tutorials Browser</h2>
</header>
<div class="row half">
<ul id="browser" class="filetree">
<li><a href="../../Web-Pentest.html"><span class="folder">Web Pentest</span></a><ul id="Web-Pentest"></ul></li>
</ul>
<script>
function SetOpt(type,element,path,title,name){
container = document.getElementById(element);
if(type=='folder')
element='<li><span class="'+type+'"><a href="https://www.securityidiots.com/'+path+'" title="'+title+'">'+name+'</a></span><ul id="'+path+'"></ul></li>';
else
element='<li><span class="'+type+'"><a href="https://www.securityidiots.com/'+path+'" title="'+title+'">'+name+'</a></span></li>';
container.innerHTML = container.innerHTML + element;
}
SetOpt('folder','Web-Pentest','Web-Pentest/Information-Gathering','Information-Gathering','Information-Gathering');
SetOpt('file','Web-Pentest/Information-Gathering','Web-Pentest/Information-Gathering/Part-0-Purpose-of-Information-Gathering.html','Part-0-Purpose-of-Information-Gathering.html','Part-0-Purpose-of-Information-Gathering.html');
SetOpt('file','Web-Pentest/Information-Gathering','Web-Pentest/Information-Gathering/Part-1-information-Gathering-with-websites.html','Part-1-information-Gathering-with-websites.html','Part-1-information-Gathering-with-websites.html');
SetOpt('file','Web-Pentest/Information-Gathering','Web-Pentest/Information-Gathering/Part-2-information-Gathering-with-Google.html','Part-2-information-Gathering-with-Google.html','Part-2-information-Gathering-with-Google.html');
SetOpt('file','Web-Pentest/Information-Gathering','Web-Pentest/Information-Gathering/Part-3-information-Gathering-with-nmap.html','Part-3-information-Gathering-with-nmap.html','Part-3-information-Gathering-with-nmap.html');
SetOpt('file','Web-Pentest/Information-Gathering','Web-Pentest/Information-Gathering/Part-4-DNS-information-Gathering-with-DIG.html','Part-4-DNS-information-Gathering-with-DIG.html','Part-4-DNS-information-Gathering-with-DIG.html');
SetOpt('file','Web-Pentest/Information-Gathering','Web-Pentest/Information-Gathering/Part-5-information-Gathering-with-Fierce.html','Part-5-information-Gathering-with-Fierce.html','Part-5-information-Gathering-with-Fierce.html');
SetOpt('file','Web-Pentest/Information-Gathering','Web-Pentest/Information-Gathering/Part-6-information-Gathering-with-FOCA.html','Part-6-information-Gathering-with-FOCA.html','Part-6-information-Gathering-with-FOCA.html');
SetOpt('file','Web-Pentest/Information-Gathering','Web-Pentest/Information-Gathering/Part-7-information-Gathering-with-Metagofil.html','Part-7-information-Gathering-with-Metagofil.html','Part-7-information-Gathering-with-Metagofil.html');
SetOpt('folder','Web-Pentest/Information-Gathering','Web-Pentest/Information-Gathering/Cloudflare-Bypass','Cloudflare-Bypass','Cloudflare-Bypass');
SetOpt('file','Web-Pentest/Information-Gathering/Cloudflare-Bypass','Web-Pentest/Information-Gathering/Cloudflare-Bypass/Part-1-Understanding-Cloudflare-Security.html','Part-1-Understanding-Cloudflare-Security.html','Part-1-Understanding-Cloudflare-Security.html');
SetOpt('file','Web-Pentest/Information-Gathering/Cloudflare-Bypass','Web-Pentest/Information-Gathering/Cloudflare-Bypass/Part-2-Cloudflare-Security-Bypass.html','Part-2-Cloudflare-Security-Bypass.html','Part-2-Cloudflare-Security-Bypass.html');
SetOpt('file','Web-Pentest/Information-Gathering/Cloudflare-Bypass','Web-Pentest/Information-Gathering/Cloudflare-Bypass/Part-3-Cloudflare-Security-Bypass.html','Part-3-Cloudflare-Security-Bypass.html','Part-3-Cloudflare-Security-Bypass.html');
SetOpt('file','Web-Pentest/Information-Gathering/Cloudflare-Bypass','Web-Pentest/Information-Gathering/Cloudflare-Bypass/Part-4-Cloudflare-Security-Bypass.html','Part-4-Cloudflare-Security-Bypass.html','Part-4-Cloudflare-Security-Bypass.html');
SetOpt('folder','Web-Pentest','Web-Pentest/LFI','LFI','LFI');
SetOpt('file','Web-Pentest/LFI','Web-Pentest/LFI/guide-to-lfi.html','guide-to-lfi.html','guide-to-lfi.html');
SetOpt('folder','Web-Pentest','Web-Pentest/SQL-Injection','SQL-Injection','SQL-Injection');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/Part-1-Basic-of-SQL-for-SQLi.html','Part-1-Basic-of-SQL-for-SQLi.html','Part-1-Basic-of-SQL-for-SQLi.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/Part-2-Basic-of-SQL-for-SQLi.html','Part-2-Basic-of-SQL-for-SQLi.html','Part-2-Basic-of-SQL-for-SQLi.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/Part-3-Basic-of-SQL-for-SQLi.html','Part-3-Basic-of-SQL-for-SQLi.html','Part-3-Basic-of-SQL-for-SQLi.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/Basic-Union-Based-SQL-Injection.html','Basic-Union-Based-SQL-Injection.html','Basic-Union-Based-SQL-Injection.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/basic-injection-single-line-or-death.html','basic-injection-single-line-or-death.html','basic-injection-single-line-or-death.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/XPATH-Error-Based-Injection-Extractvalue.html','XPATH-Error-Based-Injection-Extractvalue.html','XPATH-Error-Based-Injection-Extractvalue.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/XPATH-Error-Based-Injection-UpdateXML.html','XPATH-Error-Based-Injection-UpdateXML.html','XPATH-Error-Based-Injection-UpdateXML.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/Error-Based-Injection-Subquery-Injection.html','Error-Based-Injection-Subquery-Injection.html','Error-Based-Injection-Subquery-Injection.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/sql-evil-twin-injection.html','sql-evil-twin-injection.html','sql-evil-twin-injection.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/Blind-SQL-Injection.html','Blind-SQL-Injection.html','Blind-SQL-Injection.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/bypass-login-using-sql-injection.html','bypass-login-using-sql-injection.html','bypass-login-using-sql-injection.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/dump-database-from-login-form-sql.html','dump-database-from-login-form-sql.html','dump-database-from-login-form-sql.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/url-spoofed-phishing-with-sqli.html','url-spoofed-phishing-with-sqli.html','url-spoofed-phishing-with-sqli.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/ddos-website-with-sqli-siddos.html','ddos-website-with-sqli-siddos.html','ddos-website-with-sqli-siddos.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/delete-query-injection.html','delete-query-injection.html','delete-query-injection.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/update-query-injection.html','update-query-injection.html','update-query-injection.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/xss-injection-with-sqli-xssqli.html','xss-injection-with-sqli-xssqli.html','xss-injection-with-sqli-xssqli.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/time-based-blind-injection.html','time-based-blind-injection.html','time-based-blind-injection.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/insert-query-injection.html','insert-query-injection.html','insert-query-injection.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/group-by-and-order-by-sql-injection.html','group-by-and-order-by-sql-injection.html','group-by-and-order-by-sql-injection.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/Union-based-Oracle-Injection.html','Union-based-Oracle-Injection.html','Union-based-Oracle-Injection.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/Dump-in-One-Shot-part-1.html','Dump-in-One-Shot-part-1.html','Dump-in-One-Shot-part-1.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/Dump-in-One-Shot-part-2.html','Dump-in-One-Shot-part-2.html','Dump-in-One-Shot-part-2.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/DIOS-the-SQL-Injectors-Weapon-Upgraded.html','DIOS-the-SQL-Injectors-Weapon-Upgraded.html','DIOS-the-SQL-Injectors-Weapon-Upgraded.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/database-type-testing-sql-injection.html','database-type-testing-sql-injection.html','database-type-testing-sql-injection.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/routed_sql_injection.html','routed_sql_injection.html','routed_sql_injection.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/multi-query-injection.html','multi-query-injection.html','multi-query-injection.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/mssql-insert-query-injection.html','mssql-insert-query-injection.html','mssql-insert-query-injection.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/oracle-sql-injection-dios-query.html','oracle-sql-injection-dios-query.html','oracle-sql-injection-dios-query.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/mssql-out-of-band-exploitation.html','mssql-out-of-band-exploitation.html','mssql-out-of-band-exploitation.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/addslashes-bypass-sql-injection.html','addslashes-bypass-sql-injection.html','addslashes-bypass-sql-injection.html');
SetOpt('folder','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/MSSQL','MSSQL','MSSQL');
SetOpt('file','Web-Pentest/SQL-Injection/MSSQL','Web-Pentest/SQL-Injection/MSSQL/mssql-dios.html','mssql-dios.html','mssql-dios.html');
SetOpt('file','Web-Pentest/SQL-Injection/MSSQL','Web-Pentest/SQL-Injection/MSSQL/MSSQL-Union-Based-Injection.html','MSSQL-Union-Based-Injection.html','MSSQL-Union-Based-Injection.html');
SetOpt('file','Web-Pentest/SQL-Injection/MSSQL','Web-Pentest/SQL-Injection/MSSQL/MSSQL-Error-Based-Injection.html','MSSQL-Error-Based-Injection.html','MSSQL-Error-Based-Injection.html');
SetOpt('folder','Web-Pentest','Web-Pentest/Tricks','Tricks','Tricks');
SetOpt('file','Web-Pentest/Tricks','Web-Pentest/Tricks/Grab-IP-Address-Using-Image.html','Grab-IP-Address-Using-Image.html','Grab-IP-Address-Using-Image.html');
SetOpt('folder','Web-Pentest','Web-Pentest/WAF-Bypass','WAF-Bypass','WAF-Bypass');
SetOpt('file','Web-Pentest/WAF-Bypass','Web-Pentest/WAF-Bypass/waf-bypass-guide-part-1.html','waf-bypass-guide-part-1.html','waf-bypass-guide-part-1.html');
SetOpt('file','Web-Pentest/WAF-Bypass','Web-Pentest/WAF-Bypass/bypass-sucuri-webSite-firewall.html','bypass-sucuri-webSite-firewall.html','bypass-sucuri-webSite-firewall.html');
SetOpt('folder','Web-Pentest','Web-Pentest/XPATH-Injection','XPATH-Injection','XPATH-Injection');
SetOpt('file','Web-Pentest/XPATH-Injection','Web-Pentest/XPATH-Injection/Basics-of-XPATH-for-XPATH-Injection-part-1.html','Basics-of-XPATH-for-XPATH-Injection-part-1.html','Basics-of-XPATH-for-XPATH-Injection-part-1.html');
SetOpt('file','Web-Pentest/XPATH-Injection','Web-Pentest/XPATH-Injection/Basics-of-XPATH-for-XPATH-Injection-part-2.html','Basics-of-XPATH-for-XPATH-Injection-part-2.html','Basics-of-XPATH-for-XPATH-Injection-part-2.html');
SetOpt('file','Web-Pentest/XPATH-Injection','Web-Pentest/XPATH-Injection/Basics-XPATH-injection.html','Basics-XPATH-injection.html','Basics-XPATH-injection.html');
SetOpt('file','Web-Pentest/XPATH-Injection','Web-Pentest/XPATH-Injection/xpath-injection-part-1.html','xpath-injection-part-1.html','xpath-injection-part-1.html');
SetOpt('folder','Web-Pentest','Web-Pentest/XSS','XSS','XSS');
SetOpt('file','Web-Pentest/XSS','Web-Pentest/XSS/xss.series-by-securityidiots.html','xss.series-by-securityidiots.html','xss.series-by-securityidiots.html');
SetOpt('file','Web-Pentest/XSS','Web-Pentest/XSS/basics-of-javascript-for-XSS-part2.html','basics-of-javascript-for-XSS-part2.html','basics-of-javascript-for-XSS-part2.html');
SetOpt('file','Web-Pentest/XSS','Web-Pentest/XSS/basics-of-javascript-for-XSS3-final.html','basics-of-javascript-for-XSS3-final.html','basics-of-javascript-for-XSS3-final.html');
SetOpt('file','Web-Pentest/XSS','Web-Pentest/XSS/xss-exploitation-series-part-1.html','xss-exploitation-series-part-1.html','xss-exploitation-series-part-1.html');
SetOpt('file','Web-Pentest/XSS','Web-Pentest/XSS/different-contexts-for-xss-execution.html','different-contexts-for-xss-execution.html','different-contexts-for-xss-execution.html');
SetOpt('folder','Web-Pentest','Web-Pentest/XXE','XXE','XXE');
SetOpt('file','Web-Pentest/XXE','Web-Pentest/XXE/XXE-Cheat-Sheet-by-SecurityIdiots.html','XXE-Cheat-Sheet-by-SecurityIdiots.html','XXE-Cheat-Sheet-by-SecurityIdiots.html');

</script> </div>
</section>
</div>  <div id="content" class="8u skel-cell-important">
<section class="lol" style="padding:10px;background:#C9C9C2;color:black; border: 2px solid #a1a1a1;border-radius: 8px;">
<header class="major">
<h3><span class="byline">Basics of Javascript for XSS part 2</span></h3>
<div class="row no-collapse-1">
<span class="post-description" style="text-align:justify;"><span class="s1">Welcome to the Part2 of Basics of JavaScript for XSS.</span> <br><br>
<span class="s1">In our last Tutorial, Part1 of Basics of JavaScript for XSS we learnt about:</span><br>
<li class="p1"><span class="s1">DOM</span></li>
<li class="p1"><span class="s1">JavaScript Basic Syntax</span></li>
<li class="p1"><span class="s1">Declaring variables</span></li>
<li class="p1"><span class="s1">Different datatypes (number,String,boolean,Object,Array)</span></li>
<li class="p1"><span class="s1">Different Notations to access Object's properties value</span></li>
&nbsp;<br>
<span class="s1">Now we will continue our discussion on some other Important Properties of "window" and "document" object.</span><br>
&nbsp;<br>
<span class="s1"><em><span style="text-decoration: underline; color: #0000ff;"><strong>window.location.hash or location.hash</strong> </span></em>- This property returns the part of URI Fragment ie. Whatever is written in the URL after "#" (hash symbol) For example a URL <a href="../../index.html#blablalabla"><span class="s2">https://www.securityidiots.com/#blablalabla</span></a> in that case "location.hash;" would return "#blablalabla" </span> and
<span class="s1"><span style="color: #0000ff;">location.hash.slice(1);</span> would return blablalabla ie. It will slice 1</span><span class="s3"><sup>st</sup></span><span class="s1"> character from the string, which is #. </span><br>
&nbsp;<br>
<span class="s1">This part after hash in the URL is for client side usage and hence it couldn't be accessed by Server Side Languages which is why is very helpful in bypassing Server Side WAF.</span><br>
<p class="p3">&nbsp;<br>
<span class="s1"><em><span style="text-decoration: underline;"><strong><span style="color: #0000ff; text-decoration: underline;">window.location.search or location.search</span></strong></span></em> - This property returns the query string or the "GET" parameter. For example:
<pre><span class="s1">https://www.securityidiots.com/?xyz=1&amp;abc=zen</span>
<span class="s1">"location.search;" would return "?xyz=1&amp;abc=zen"</span>
</pre>
<span class="s1"><span style="color: #0000ff;"><em><span style="text-decoration: underline;"><strong>document.domain</strong></span></em></span> - This property is used to return the hostname of where javascript is executing. Similar to location.hostname. This is mainly used to confirm that XSS is executing on the right domain.</span><br>
&nbsp;<br>
<span class="s1"><span style="color: #0000ff;"><em><span style="text-decoration: underline;"><strong>document.cookie</strong></span></em></span> - This property is used to get all Cookies as a String, but if there is a "HttpOnly" flag set in the cookies, then cookies couldn't be accessed via JavaScript.</span><br>
&nbsp;<br>
<span class="s1"><span style="text-decoration: underline; color: #0000ff;"><em><strong>document.getElementsById('123')</strong></em></span> - This is a Method (a Function) which is used to get all elements (nodes) having 123 value of "id" attribute provided in the argument. We could then even modify/remove the selected nodes for Example:</span>
<pre><span class="s1">&lt;!doctype html&gt;</span>
<span class="s1">&lt;html&gt;</span>
<span class="s1">&lt;p id="someID"&gt;Select Me&lt;/p&gt;</span>
<span class="s1">&lt;script&gt;</span>
<span class="s1">var selected=document.getElementById("someID");/*would store the &lt;p id="someID"&gt;Select Me&lt;/p&gt; node in selected variables*/</span>
<span class="s1">&lt;/script&gt;</span>
<span class="s1">&lt;/html&gt;</span>
</pre>
<span class="s1">There are many other similar methods too to manipulate the DOM like:</span><br>
<span class="s1"><strong>document.getElementsByName('Name'); </strong></span><br>
<span class="s1"><strong>document.getElementsByTagName('TagName');</strong></span><br>
<span class="s1"><strong>document.getElementsByClassName('ClassName');</strong></span><br>
&nbsp;<br>
<span class="s1">However there could be Multiple Tags with the&nbsp;same value of Tag Names, name &amp; class attributes, in that case, an array of nodes is returned and could be accessed via array indices like selected[0], selected[1]...etc.</span><br>
&nbsp;<br>
<span class="s1"><span style="text-decoration: underline; color: #0000ff;"><em><strong>document.innerHTML</strong></em></span> - This method is used to write HTML content within a selected node. For example:</span>
<pre><span class="s1">&lt;!doctype html&gt;</span>
<span class="s1">&lt;html&gt;</span>
<span class="s1">&lt;p id="someID"&gt;Select Me&lt;/p&gt;</span>
<span class="s1">&lt;script&gt;</span>
<span class="s1">var selected=document.getElementById("someID");/*would store the &lt;p id="someID"&gt;Select Me&lt;/p&gt; node in selected variable*/</span>
<span class="s1">selected.innerHTML="&lt;p&gt;Text blabla&lt;/p&gt;";/*you would see the content inside &lt;p id="someID"&gt; has now changed to &lt;p&gt;Text blabla&lt;/p&gt;*/</span>
<span class="s1">&lt;/script&gt;</span>
<span class="s1">&lt;/html&gt;</span>
</pre>
<span class="s1" style="color: #ff0000;">Any User Input to This is Very Dangerous Even if its filtering &gt; , &lt; , " , ' only by using backslash(\) ,numbers(0-9),alphabets Malicious User could Execute Javascript.(Explained Later)</span><br>
&nbsp;<br>
<span class="s1"><span style="text-decoration: underline; color: #0000ff;"><em><strong>document.write/document.writeln("HTML Content")</strong></em></span> - This is used to rewrite(remove existing HTML) the Whole structure of web page with its supplied Argument(HTML content). For&nbsp;</span>Example:
<pre><span class="s1">&lt;!doctype html&gt;</span>
<span class="s1">&lt;html&gt;</span>
<span class="s1">&lt;script&gt;</span>
<span class="s1">document.write("Contents of The Page");</span>
<span class="s1">&lt;/script&gt;</span>
<span class="s1">&lt;/html&gt;</span>
</pre>
<span class="s1" style="color: #ff0000;">Any User Input to this is Very Dangerous Even if it's filtering &gt;, &lt;, " , ' only by using backslash(\), numbers(0-9), alphabets Malicious User could Execute JavaScript which will be explained Later in out tutorial</span><br>
&nbsp;<br>
<span class="s1"><span style="text-decoration: underline; color: #0000ff;"><em><strong>document.createElement('Element Name')</strong> </em></span>&ndash; createElement Method is used to create a new HTML element with javascript. For example if we want to create an img element with src="http://securityidiots.com/post_images/backxss.png"<br /> </span>
<pre><span class="s1">var imgtag = document.createElement("img");//creates img element</span>
<span class="s1">imgtag.src="http://securityidiots.com/post_images/backxss.png";//adds attribute src to img element</span>
<span class="s1">document.body.appendChild(imgtag);//appends the created element to the body tag of the DOM </span>
</pre>
<span class="s1"><span style="text-decoration: underline;"><strong>Note</strong></span>: There may be more properties that we would cover as we move further but for now these properties should be enough to move ahead.</span><br>
&nbsp;<br>
<span class="s1"><strong><U>JAVASCRIPT FUNCTIONS</U></strong></span><br>
&nbsp;<br>
<span class="s1">Like other languages, there are functions in JavaScript too which used to execute a set of statements/instructions to reduce repetition of our code.</span><br>
&nbsp;<br>
<span class="s1"><strong>Defining Javascript Functions:</strong></span><br>
&nbsp;<br>
<span class="s1">A JavaScript function is defined with "function" keyword, followed by the function&rsquo;s name, followed by parenthesis () and inside it may include arguments/parameter names separated by commas, Functions in JavaScript are called, similar to other languages: </span><br>
<span class="s1">functionname([arg1,arg2]); // [] indicates that arguments/parameters are optional</span><br>
&nbsp;<br>
<span class="s1"><strong>Ways of Defining and Calling Functions:</strong></span>
&nbsp;<pre><span class="s1">//Defining</span>
<span class="s1">var x=function myFunction(a, b) {</span>
<span class="s1"><span class="Apple-converted-space">&nbsp; &nbsp; </span>return a * b;<span class="Apple-converted-space">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></span>
<span class="s1">};</span>
&nbsp;
<span class="s1">//Calling</span>
<span class="s1">z=x(30,40);// would return 1200 in variable z</span>
</pre>
<span class="s1">we could also call a function directly without storing it in a variable</span>
<pre><span class="s1">//Defining</span>
<span class="s1">function myFunction(a, b) {</span>
<span class="s1"><span class="Apple-converted-space">&nbsp; &nbsp; </span>return a * b;<span class="Apple-converted-space">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></span>
<span class="s1">};</span>
&nbsp;
<span class="s1">//Calling</span>
<span class="s1">z=myFunction(30,40);</span>
</pre>
<span class="s1">We could also define functions without names called as "Closures" or anonymous functions like:</span>
<pre><span class="s1">//Defining</span>
<span class="s1">var x=function(arg){ </span>
<span class="s1"><span class="Apple-converted-space">&nbsp; </span>return arg*100;</span>
<span class="s1">};</span>
&nbsp;
<span class="s1">//Calling</span>
<span class="s1">x(10);//would return 1000</span>
</pre>
<span class="s1">And also, we can do define and call, both at the same time:</span>
<pre><span class="s1">var x=function(arg){ </span>
<span class="s1"><span class="Apple-converted-space">&nbsp; </span>return arg*100;</span>
<span class="s1">}(10); <span class="Apple-converted-space">&nbsp; &nbsp; &nbsp; </span>// function would be called &amp; would return 1000 in x variable</span>
</pre>
<span class="s1"><strong>Concatenation in Javascript:</strong></span><br>
Since Javascript is a loosely typed language, We can Concatenate Strings with Strings as well as with Other Data Type like number (integer/floats)/boolean with "+" Operator<br>
&nbsp;<br>
<span class="s1">For example : </span><pre><span class="s1">var x="aaaaaa"+"bbbb"; //console.log(x) would return aaaaaabbbb</span>
<span class="s1">var x="aaa"+1234;//console.log(x) would return aaa1234</span>
</pre>
<h3 class="p1"><span class="s1"><strong><span style="text-decoration: underline;">IMPORTANT JS FUNCTIONS RELATED TO XSS</span><span class="Apple-converted-space">&nbsp;&nbsp;</span></strong></span></h3>
<strong>1. console.log:&nbsp;</strong>("logs this to browser's developer console "); - This writes the output to the browser console which is used for debugging purposes ie. We could get/set/change/override the values of variables/functions etc. in the console itself. A very nice example would be:
<pre><span class="s1">&lt;!doctype html&gt;</span>
<span class="s1">&lt;html&gt;</span>
<span class="s1">&lt;script&gt;</span>
<span class="s1">console.log("Test!!");</span>
<span class="s1">&lt;/script&gt;</span>
<span class="s1">&lt;/html&gt;</span>
</pre>
<span class="s1">Now open the Browser's Developer Console (by pressing F12/Ctrl+Shift+J depends on browser) and reload the page, you would see "Test!!" logged in the console.</span><br>
&nbsp;<br>
<span class="s1">Getting the values of variables in console: </span>
<pre><span class="s1">&lt;!doctype html&gt;</span>
<span class="s1">&lt;html&gt;</span>
<span class="s1">&lt;script&gt;</span>
<span class="s1">var a=10,b=null,c="String",d=false,e={A:1,B:"String2",C:[1,2]},f=[1,2,3,"String3"],g;</span>
<span class="s1">console.log("Value of a:");</span>
<span class="s1">console.log(a);</span>
<span class="s1">console.log("Value of b:");</span>
<span class="s1">console.log(b);</span>
<span class="s1">console.log("Value of c:");</span>
<span class="s1">console.log(c);</span>
<span class="s1">console.log("Value of d:");</span>
<span class="s1">console.log(d);</span>
<span class="s1">console.log("Value of e:");</span>
<span class="s1">console.log(e);</span>
<span class="s1">console.log("Value of f:");</span>
<span class="s1">console.log(f);</span>
<span class="s1">console.log("Value of g:");</span>
<span class="s1">console.log(g);</span>
<span class="s1">&lt;/script&gt;</span>
<span class="s1">&lt;/html&gt;</span>
</pre>
<span class="s1">Open Browser's Developer Console and reload The above Page you would see the values of a,b,c,d,e,f,g variables in Console.</span><br>
&nbsp;&nbsp;<br>
<span class="s1"><strong>2. alert(1);prompt(1);confirm(1)</strong> - </span><br>
&nbsp;<br>
<span class="s1"><strong>alert"Argument Here"):</strong> ( The very infamous :P alert() is used to popup an alert message box with the Argument String written in it, it doesn't return anything</span>
<br><br>
<span class="s1"><strong>prompt("Argument Here"):</strong> ( is used to popup a prompt to take user input with a message supplied in Argument String, it returns the value entered by the user</span>
<pre><span class="s1">var x=prompt("Enter Value: ");// after User enters value it will be stored in x for further operations</span>
</pre>
<span class="s1"><strong>confirm("Message"):</strong> is used to popup a confirm box to confirm(OK/Cancel) Something, Pressing OK returns true and Cancel returns false.</span><br>
<pre><span class="s1">var conf=confirm("Are You Sure To blablabla?");</span>
</pre>
<span class="s1">From XSS point of view, these are the functions which we use to confirm/identify that XSS/JavaScript is Executing on the target</span><br>
&nbsp;<br>
<span class="s1"><strong>3.&nbsp;setTimeout()</strong> - The setTimeout() method calls a function after a specified number of milliseconds.</span>
<pre><span class="s1">setTimeout(function(){ alert("Hello"); }, 3000); // will call anonymous function after 3 seconds </span>
</pre>
<span class="s1"><strong>4.&nbsp;setInterval() </strong>- The setInterval() method calls a function after specified intervals endlessly</span><br>
<pre><span class="s1">setInterval(alert(1),3000); // will call alert(1) after every 3 seconds</span>
</pre>
<span class="s1">Therefore these setTimeout and setInterval functions could be used to execute JavaScript (XSS) when user input is in the first parameter.</span><br>
&nbsp;<br>
<span class="s1"><strong>6.var z=new Function('arg1','arg2','body')</strong> - creates a new Function object similar to <font color="grey">var z=function(arg1,arg2){body;}.</font></span><br>
<span class="s1">The User input to the last parameter is dangerous and could be used to XSS if that function is called anywhere in the page.</span>
<pre><span class="s1">var z=new Function('arg1','arg2','alert(1)')</span>
<span class="s1">z(1,2);//would cause alert(1)</span>
</pre>
<span class="s1">7.<strong>eval</strong>("JavaScript here") - used to evaluate string in its argument as JavaScript.</span>
<pre><span class="s1">eg.eval('var x=1;alert(x)');</span>
</pre>
<span class="s1">User input to this eval() is extremely dangerous.</span><br>
&nbsp;<br>
<span class="s1">That&rsquo;s enough for basics about Functions, for now, we would keep covering more about them if we require them in further topics. So in our next part of JavaScript Basics, we would cover <strong>EventHandlers</strong> and <strong>AJAX (XMLHttpRequest).</strong></span><br><img src="../../post_images/xss_03.jpg" width=0>
<br>Author : Rahul Maini<br>Date : 2017-04-29</span><br><br></div><div id="disqus_thread"></div>
<script>
var disqus_config = function () {
this.page.url = "http://securityidiots.com/Web-Pentest/XSS/basics-of-javascript-for-XSS-part2.html";  
this.page.identifier = "60";
};

(function() {
var d = document, s = d.createElement('script');
s.src = 'https://securityidiots-com.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> </div>
</header>
</section>
</div>
</div>
</div>
</div>

<div id="footer">
<div class="container">

<div class="row">
<div class="8u">
<section>
<header class="major">
<h2>Connect with Security Idiots</h2>
<span class="byline">Learn & share more on Hacking and Security</span>
</header>
<div class="row">
<section class="6u">
<ul class="default">
<li><a href="https://www.facebook.com/pages/securityidiotscom/879838302049912" target="_BLANK"><img src="basics-of-javascript-for-XSS-part2.html" width=40>&nbsp;&nbsp;<font size=5><b>FACEBOOK</b></font></a></li>
<li><a href="https://www.youtube.com/channel/UCPPAYs04kwfXcHnerm_ueFw" target="_BLANK"><img src="../../images/youtube.png" width=40>&nbsp;&nbsp;<font size=5><b>Youtube Channel</b></font></a></li>
</ul>
</section>
</div>
</section>
</div>
<div class="4u">
<section>
<header class="major">
<h2>Contact Security Idiots</h2>
</header>
<ul class="contact">
<li>
<span class="address">Email</span>
<span><a href="../../cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="4322272e2a2d0330262036312a373a2a272a2c37306d202c2e">[email&#160;protected]</a></span>
</li>
</ul>
</section>
</div>
</div>

<div class="copyright">
Designed by k-hz webdevelopers
</div>
</div>
</div>
<script data-cfasync="false" src="../../cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script></body>
</html>